---
title: Linux的软硬链接
date: 2019-05-08 22:16:39
tags: Linux
categories: Linux
---
> 在linux系统中有种文件是链接文件，可以为解决文件的共享使用。链接的方式可以分为两种，一种是硬链接（Hard Link），另一种是软链接或者也称为符号链接（Symbolic Link）

## 硬链接

用法： ln [源文件] [目标文件]

英文原意：link

1. 拥有相同的`i`节点和存储`block`块，可以看做是同一个文件
2. 可通过`i`节点识别
3. 不能跨分区
4. 不能针对目录使用

一个分区要想使用，要把它分成等大小的`block`数据块，在分区之前会有分区表，给每个文件建一行相关数据，保存了`i`节点号，修改的时间以及存储的位置

![39](http://blog.panxiandiao.com/39.png)

如图：比如一个用户想要知道`A`文件，他不是直接到硬盘中去取数据，而是会先去搜索分区表，然后确定到`i`节点号，来确定文件的这一行数据，然后根据存储位置来读取到硬盘中的数据

假设我给`A`文件创建了一个硬链接`B`，`B`和`A`有相同的`i`节点号，那么他们的内容也肯定是相同的，也就是说他们两个就是一模一样的文件，只不过名字不一样

**我们不建议使用硬链接，首先是很难区分，其次限制较多，很容易产生错误**

## 软链接

用法： ln -s [源文件] [目标文件]

1. 类似`Windows`快捷方式
2. 软链接拥有自己的`i`节点和`Block块`，但是数据块中只保存原文件的文件名和`i`节点号，并没有实际的文件数据
3. 软链接文件权限都为rwxrwxrwx
4. 修改任意文件，另一个都改变
5. 删除原文件，软链接不能使用

![40](http://blog.panxiandiao.com/40.png)

同样的我们为`A`创建一个软链接`B`，这时候`B`是有自己的`i`节点号,时间，存储的位置的,当然也有对应的数据块，但是这个数据块里面保存的是`A`的`i`节点号，时间，存储位置，所以在通过这个来读取原始数据，所以和这个原理和`Windows`快捷方式的原理一模一样，比如我们创建了桌面的某个文件的快捷方式，通过这个快捷方式找到原文件在执行。如果我们修改`A`，软链接就会找不到`B`所指的`A`的`i`节点，就不能使用了